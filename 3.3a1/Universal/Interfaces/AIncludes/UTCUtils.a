;
;	File:		UTCUtils.a
;
;	Contains:	Interface for UTC to Local Time conversion and 64 Bit Clock routines
;
;	Version:	Technology:	Sonata
;				Release:	Universal Interfaces 3.3a1
;
;	Copyright:	Â© 1999 by Apple Computer, Inc., all rights reserved.
;
;	Bugs?:		For bug reports, consult the following page on
;				the World Wide Web:
;
;					http://developer.apple.com/bugreporter/
;
;
	IF &TYPE('__UTCUTILS__') = 'UNDEFINED' THEN
__UTCUTILS__ SET 1

	IF &TYPE('__MACTYPES__') = 'UNDEFINED' THEN
	include 'MacTypes.a'
	ENDIF

;  Status Codes 

kUTCUnderflowErr				EQU		-8850
kUTCOverflowErr					EQU		-8851
kIllegalClockValueErr			EQU		-8852
;  Options for Set & Get DateTime Routines 

kUTCDefaultOptions				EQU		0
;  64 Bit Clock Typedefs 
UTCDateTime				RECORD 0
highSeconds				 ds.w	1				; offset: $0 (0)
lowSeconds				 ds.l	1				; offset: $2 (2)
fraction				 ds.w	1				; offset: $6 (6)
sizeof					 EQU *					; size:   $8 (8)
						ENDR
; typedef struct UTCDateTime *			UTCDateTimePtr

; typedef UTCDateTimePtr *				UTCDateTimeHandle

LocalDateTime			RECORD 0
highSeconds				 ds.w	1				; offset: $0 (0)
lowSeconds				 ds.l	1				; offset: $2 (2)
fraction				 ds.w	1				; offset: $6 (6)
sizeof					 EQU *					; size:   $8 (8)
						ENDR
; typedef struct LocalDateTime *		LocalDateTimePtr

; typedef LocalDateTimePtr *			LocalDateTimeHandle

;  Classic 32 bit clock conversion routines 
	IF CALL_NOT_IN_CARBON THEN
;
; extern OSStatus ConvertLocalTimeToUTC(UInt32 localSeconds, UInt32 *utcSeconds)
;
	IF TARGET_OS_MAC ** TARGET_RT_MAC_CFM THEN
		IMPORT_CFM_FUNCTION ConvertLocalTimeToUTC
	ENDIF

;
; extern OSStatus ConvertUTCToLocalTime(UInt32 utcSeconds, UInt32 *localSeconds)
;
	IF TARGET_OS_MAC ** TARGET_RT_MAC_CFM THEN
		IMPORT_CFM_FUNCTION ConvertUTCToLocalTime
	ENDIF

;  64 bit clock conversion routines 
;
; extern OSStatus ConvertUTCToLocalDateTime(const UTCDateTime *utcDateTime, LocalDateTime *localDateTime)
;
	IF TARGET_OS_MAC ** TARGET_RT_MAC_CFM THEN
		IMPORT_CFM_FUNCTION ConvertUTCToLocalDateTime
	ENDIF

;
; extern OSStatus ConvertLocalToUTCDateTime(const LocalDateTime *localDateTime, UTCDateTime *utcDateTime)
;
	IF TARGET_OS_MAC ** TARGET_RT_MAC_CFM THEN
		IMPORT_CFM_FUNCTION ConvertLocalToUTCDateTime
	ENDIF

;  Getter and Setter Clock routines using 64 Bit values 
;
; extern OSStatus GetUTCDateTime(UTCDateTime *utcDateTime, OptionBits options)
;
	IF TARGET_OS_MAC ** TARGET_RT_MAC_CFM THEN
		IMPORT_CFM_FUNCTION GetUTCDateTime
	ENDIF

;
; extern OSStatus SetUTCDateTime(const UTCDateTime *utcDateTime, OptionBits options)
;
	IF TARGET_OS_MAC ** TARGET_RT_MAC_CFM THEN
		IMPORT_CFM_FUNCTION SetUTCDateTime
	ENDIF

;
; extern OSStatus GetLocalDateTime(LocalDateTime *localDateTime, OptionBits options)
;
	IF TARGET_OS_MAC ** TARGET_RT_MAC_CFM THEN
		IMPORT_CFM_FUNCTION GetLocalDateTime
	ENDIF

;
; extern OSStatus SetLocalDateTime(const LocalDateTime *localDateTime, OptionBits options)
;
	IF TARGET_OS_MAC ** TARGET_RT_MAC_CFM THEN
		IMPORT_CFM_FUNCTION SetLocalDateTime
	ENDIF

	ENDIF	; CALL_NOT_IN_CARBON
	ENDIF ; __UTCUTILS__ 


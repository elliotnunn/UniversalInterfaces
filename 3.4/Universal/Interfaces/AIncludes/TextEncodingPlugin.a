;
;    File:       TextEncodingPlugin.a
;
;    Contains:   Required interface for Text Encoding Converter-Plugins
;
;    Version:    Technology: Mac OS 8
;                Release:    Universal Interfaces 3.4
;
;    Copyright:  Â© 1996-2001 by Apple Computer, Inc., all rights reserved.
;
;    Bugs?:      For bug reports, consult the following page on
;                the World Wide Web:
;
;                    http://developer.apple.com/bugreporter/
;
;
	IF &TYPE('__TEXTENCODINGPLUGIN__') = 'UNDEFINED' THEN
__TEXTENCODINGPLUGIN__ SET 1

	IF &TYPE('__MACTYPES__') = 'UNDEFINED' THEN
	include 'MacTypes.a'
	ENDIF
	IF &TYPE('__TEXTCOMMON__') = 'UNDEFINED' THEN
	include 'TextCommon.a'
	ENDIF
	IF &TYPE('__TEXTENCODINGCONVERTER__') = 'UNDEFINED' THEN
	include 'TextEncodingConverter.a'
	ENDIF

; 
;####################################################################################
;        Structs
;####################################################################################
;

TECBufferContextRec		RECORD 0
textInputBuffer			 ds.l	1				; offset: $0 (0)
textInputBufferEnd		 ds.l	1				; offset: $4 (4)
textOutputBuffer		 ds.l	1				; offset: $8 (8)
textOutputBufferEnd		 ds.l	1				; offset: $C (12)
encodingInputBuffer		 ds.l	1				; offset: $10 (16)
encodingInputBufferEnd	 ds.l	1				; offset: $14 (20)
encodingOutputBuffer	 ds.l	1				; offset: $18 (24)
encodingOutputBufferEnd	 ds.l	1				; offset: $1C (28)
sizeof					 EQU *					; size:   $20 (32)
						ENDR
TECPluginStateRec		RECORD 0
state1					 ds.b	1				; offset: $0 (0)
state2					 ds.b	1				; offset: $1 (1)
state3					 ds.b	1				; offset: $2 (2)
state4					 ds.b	1				; offset: $3 (3)
longState1				 ds.l	1				; offset: $4 (4)
longState2				 ds.l	1				; offset: $8 (8)
longState3				 ds.l	1				; offset: $C (12)
longState4				 ds.l	1				; offset: $10 (16)
sizeof					 EQU *					; size:   $14 (20)
						ENDR
TECConverterContextRec	RECORD 0
;  public - manipulated externally and by plugin
pluginRec				 ds.l	1				; offset: $0 (0)
sourceEncoding			 ds.l	1				; offset: $4 (4)
destEncoding			 ds.l	1				; offset: $8 (8)
reserved1				 ds.l	1				; offset: $C (12)
reserved2				 ds.l	1				; offset: $10 (16)
bufferContext			 ds		TECBufferContextRec ; offset: $14 (20)
;  private - manipulated only within Plugin
contextRefCon			 ds.l	1				; offset: $34 (52)
conversionProc			 ds.l	1				; offset: $38 (56)
flushProc				 ds.l	1				; offset: $3C (60)
clearContextInfoProc	 ds.l	1				; offset: $40 (64)
options1				 ds.l	1				; offset: $44 (68)
options2				 ds.l	1				; offset: $48 (72)
pluginState				 ds		TECPluginStateRec ; offset: $4C (76)
sizeof					 EQU *					; size:   $60 (96)
						ENDR
TECSnifferContextRec	RECORD 0
;  public - manipulated externally
pluginRec				 ds.l	1				; offset: $0 (0)
encoding				 ds.l	1				; offset: $4 (4)
maxErrors				 ds.l	1				; offset: $8 (8)
maxFeatures				 ds.l	1				; offset: $C (12)
textInputBuffer			 ds.l	1				; offset: $10 (16)
textInputBufferEnd		 ds.l	1				; offset: $14 (20)
numFeatures				 ds.l	1				; offset: $18 (24)
numErrors				 ds.l	1				; offset: $1C (28)
;  private - manipulated only within Plugin
contextRefCon			 ds.l	1				; offset: $20 (32)
sniffProc				 ds.l	1				; offset: $24 (36)
clearContextInfoProc	 ds.l	1				; offset: $28 (40)
pluginState				 ds		TECPluginStateRec ; offset: $2C (44)
sizeof					 EQU *					; size:   $40 (64)
						ENDR

;  ####################################################################################
;        Functional Messages
;  ####################################################################################




;  ####################################################################################
;        Dispatch Table Definition
;  ####################################################################################




kTECPluginDispatchTableVersion1	EQU		$00010000			; 1.0 through 1.0.3 releases
kTECPluginDispatchTableVersion1_1 EQU	$00010001			; 1.1 releases
kTECPluginDispatchTableVersion1_2 EQU	$00010002			; 1.2 releases
kTECPluginDispatchTableCurrentVersion EQU $00010002
TECPluginDispatchTable	RECORD 0
version					 ds.l	1				; offset: $0 (0)
compatibleVersion		 ds.l	1				; offset: $4 (4)
PluginID				 ds.l	1				; offset: $8 (8)
PluginNewEncodingConverter  ds.l 1				; offset: $C (12)
PluginClearContextInfo	 ds.l	1				; offset: $10 (16)
PluginConvertTextEncoding  ds.l	1				; offset: $14 (20)
PluginFlushConversion	 ds.l	1				; offset: $18 (24)
PluginDisposeEncodingConverter  ds.l 1			; offset: $1C (28)
PluginNewEncodingSniffer  ds.l	1				; offset: $20 (32)
PluginClearSnifferContextInfo  ds.l 1			; offset: $24 (36)
PluginSniffTextEncoding	 ds.l	1				; offset: $28 (40)
PluginDisposeEncodingSniffer  ds.l 1			; offset: $2C (44)
PluginGetCountAvailableTextEncodings  ds.l 1	; offset: $30 (48)
PluginGetCountAvailableTextEncodingPairs  ds.l 1 ; offset: $34 (52)
PluginGetCountDestinationTextEncodings  ds.l 1 ; offset: $38 (56)
PluginGetCountSubTextEncodings  ds.l 1			; offset: $3C (60)
PluginGetCountAvailableSniffers  ds.l 1			; offset: $40 (64)
PluginGetCountWebTextEncodings  ds.l 1			; offset: $44 (68)
PluginGetCountMailTextEncodings  ds.l 1			; offset: $48 (72)
PluginGetTextEncodingInternetName  ds.l 1		; offset: $4C (76)
PluginGetTextEncodingFromInternetName  ds.l 1	; offset: $50 (80)
sizeof					 EQU *					; size:   $54 (84)
						ENDR






	ENDIF ; __TEXTENCODINGPLUGIN__ 

